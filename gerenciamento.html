<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciamento de Servi√ßos Di√°rio</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen p-6">

    <!-- Seletor de data e saldo -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-4">
        <div>
            <label class="font-bold mr-2" for="data">Escolha a data:</label>
            <input type="date" id="data" class="border p-2 rounded">
        </div>
        <div>
            <span class="text-green-600 font-bold text-xl">Saldo do dia: R$ </span>
            <span id="saldoTotal" class="text-green-600 font-bold text-xl">0.00</span>
        </div>
    </div>

    <div class="max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-md">
        <h1 class="text-2xl font-bold mb-4 text-center">Gerenciamento de Servi√ßos</h1>

        <!-- Formul√°rio -->
        <form id="formServico" class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
            <input type="text" id="modelo" placeholder="Modelo do ve√≠culo" class="border p-2 rounded" required>
            <input type="text" id="placa" placeholder="Placa" class="border p-2 rounded" required>
            <select id="servico" class="border p-2 rounded">
                <option value="Lavagem">Lavagem Simples</option>
                <option value="Polimento">Lavagem Premium</option>
                <option value="Higieniza√ß√£o">Higieniza√ß√£o</option>
            </select>
            <input type="number" id="valor" placeholder="Valor" class="border p-2 rounded" required>
            <input type="text" id="funcionario" placeholder="Funcion√°rio" class="border p-2 rounded" required>
            <button type="submit"
                class="md:col-span-5 bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-600 transition">Adicionar
                Servi√ßo</button>
        </form>

        <!-- Tabela -->
        <div class="overflow-x-auto">
            <table class="w-full border-collapse border border-gray-300">
                <thead class="bg-gray-200">
                    <tr>
                        <th class="border p-2">Modelo</th>
                        <th class="border p-2">Placa</th>
                        <th class="border p-2">Servi√ßo</th>
                        <th class="border p-2">Valor</th>
                        <th class="border p-2">Funcion√°rio</th>
                        <th class="border p-2">A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="tabelaServicos" class="bg-white"></tbody>
            </table>
        </div>
    </div>

    <script>
        const form = document.getElementById('formServico');
        const tabela = document.getElementById('tabelaServicos');
        const saldoTotal = document.getElementById('saldoTotal');
        const dataInput = document.getElementById('data');

        const hoje = new Date().toISOString().split('T')[0];
        dataInput.value = hoje;

        let dadosPorData = JSON.parse(localStorage.getItem('dadosPorData')) || {};
        let servicos = dadosPorData[dataInput.value] || [];
        let total = 0;

        function atualizarTabela() {
            tabela.innerHTML = '';
            total = 0;
            servicos.forEach((s, index) => {
                const row = tabela.insertRow();
                row.innerHTML = `
          <td class="border p-2">${s.modelo}</td>
          <td class="border p-2">${s.placa}</td>
          <td class="border p-2">${s.servico}</td>
          <td class="border p-2">${s.valor.toFixed(2)}</td>
          <td class="border p-2">${s.funcionario}</td>
          <td class="border p-2 text-center">
            <button class="text-red-600 hover:text-red-800" onclick="removerServico(${index})">üóëÔ∏è</button>
          </td>
        `;
                total += s.valor;
            });
            saldoTotal.textContent = total.toFixed(2);
        }

        function salvarDados() {
            dadosPorData[dataInput.value] = servicos;
            localStorage.setItem('dadosPorData', JSON.stringify(dadosPorData));
        }

        function removerServico(index) {
            if (confirm('Deseja realmente remover este servi√ßo?')) {
                servicos.splice(index, 1);
                salvarDados();
                atualizarTabela();
            }
        }

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const novoServico = {
                modelo: document.getElementById('modelo').value,
                placa: document.getElementById('placa').value,
                servico: document.getElementById('servico').value,
                valor: parseFloat(document.getElementById('valor').value),
                funcionario: document.getElementById('funcionario').value
            };

            servicos.push(novoServico);
            salvarDados();
            atualizarTabela();
            form.reset();
        });

        dataInput.addEventListener('change', () => {
            servicos = dadosPorData[dataInput.value] || [];
            atualizarTabela();
        });

        atualizarTabela();
    </script>

</body>

</html>